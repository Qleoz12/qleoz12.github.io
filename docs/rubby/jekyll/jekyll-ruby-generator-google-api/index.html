<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Integrating Jekyll with Google Drive API - Dann Brown Adventures</title>
<meta name="description" content="Introduction">


  <meta name="author" content="Dann brown">
  
  <meta property="article:author" content="Dann brown">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Dann Brown Adventures">
<meta property="og:title" content="Integrating Jekyll with Google Drive API">
<meta property="og:url" content="/rubby/jekyll/jekyll-ruby-generator-google-api/">


  <meta property="og:description" content="Introduction">







  <meta property="article:published_time" content="2023-06-22T00:00:00-05:00">



  <meta property="article:modified_time" content="2023-06-22T10:06:00-05:00">



  

  


<link rel="canonical" href="/rubby/jekyll/jekyll-ruby-generator-google-api/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Leonardo L Sanchez- Dann Brown",
      "url": "/"
    
  }
</script>







<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Dann Brown Adventures Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.0/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.0/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--archive">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          Dann Brown Adventures
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/about/">About</a>
            </li><li class="masthead__menu-item">
              <a href="/year-archive/">Archive</a>
            </li><li class="masthead__menu-item">
              <a href="/books/reading">Reading List</a>
            </li><li class="masthead__menu-item">
              <a href="/reading">looking</a>
            </li><li class="masthead__menu-item">
              <a href="/knowledge">knowledge</a>
            </li><li class="masthead__menu-item">
              <a href="/certs">certs</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      


  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/" itemprop="item"><span itemprop="name">Home</span></a>

          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/categories/#rubby" itemprop="item"><span itemprop="name">Rubby</span></a>
          <meta itemprop="position" content="2" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/categories/#jekyll" itemprop="item"><span itemprop="name">Jekyll</span></a>
          <meta itemprop="position" content="3" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        <li class="current">Integrating Jekyll with Google Drive API</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person" class="h-card">

  
    <div class="author__avatar">
      <a href="/">
        <img src="/assets/images/1577552827279.jpg" alt="Dann brown" itemprop="image" class="u-photo">
      </a>
    </div>
  

  <div class="author__content">
    <h3 class="author__name p-name" itemprop="name">
      <a class="u-url" rel="me" href="/" itemprop="url">Dann brown</a>
    </h3>
    
      <div class="author__bio p-note" itemprop="description">
        <p>I am an Senior Fullstack Software Developer working in my skills and learning new stuffs about tech daily</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name" class="p-locality">CO</span>
        </li>
      

      
        
          
        
          
            <li><a href="https://www.linkedin.com/in/leonardo-sanchez-89590b127/" rel="nofollow noopener noreferrer me"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span class="label">linkedIn</span></a></li>
          
        
          
            <li><a href="https://www.youtube.com/channel/UCoROtxDQYfIgjXBDcORK5zw/videos" rel="nofollow noopener noreferrer me"><i class="fab fa-fw fa-youtube" aria-hidden="true"></i><span class="label">Youtube</span></a></li>
          
        
          
        
          
        
          
        
          
            <li><a href="https://github.com/Qleoz12" rel="nofollow noopener noreferrer me"><i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span></a></li>
          
        
          
        
      

      

      
        <li>
          <a href="mailto:kintaroloop@gmail.com" rel="me" class="u-email">
            <meta itemprop="email" content="kintaroloop@gmail.com" />
            <i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i><span class="label">Email</span>
          </a>
        </li>
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer me">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>
  
  </div>



  <div class="archive">
    
      <h1 id="page-title" class="page__title">Integrating Jekyll with Google Drive API</h1>
    
    <h2 id="introduction">Introduction</h2>

<p>In this post, we will explore how to connect your Jekyll-powered personal 
blog with a Google Drive public folder. 
The goal is to easily share PDFs or documents by displaying them on a page of 
my blog. By utilizing Jekyll’s static site generation capabilities and plugins, 
we can automate the process of adding new certifications documents without having to 
manually code each time. Let’s dive in! (final result <a href="https://qleoz12.github.io/certs/">certs</a>)</p>

<h2 id="jekyll-and-ruby">Jekyll and Ruby</h2>

<p>To accomplish this task, we can leverage Jekyll’s plugin system, 
which allows us to extend its functionality. There are various types of 
plugins available in Jekyll, including generators, converters, commands, tags, 
filters, and hooks. More information on Jekyll plugins can be found <a href="https://jekyllrb.com/docs/plugins/">here</a>.</p>

<h2 id="creating-a-generator-plugin-for-jekyll">Creating a Generator Plugin for Jekyll</h2>

<p>To begin, we need to create a generator plugin for Jekyll. Here’s the recipe 
to complete the task:</p>

<h3 id="enable-the-google-drive-api">Enable the Google Drive API</h3>

<ol>
  <li>Go to the Google APIs Console.</li>
  <li>Create a new project.</li>
  <li>Enable the Google Drive API by searching for it and enabling it.</li>
  <li>Create credentials for a web server to access application data.</li>
  <li>Name the service account and grant it a Project Role of Editor.</li>
  <li>Download the JSON file containing the credentials.</li>
</ol>

<h3 id="connect-google-api-with-jekyll">Connect Google API with Jekyll</h3>

<p>To connect Jekyll with the Google Drive API, follow these steps:</p>

<ol>
  <li>Install the <code class="language-plaintext highlighter-rouge">google_drive</code> gem by adding <code class="language-plaintext highlighter-rouge">gem "google_drive"</code> to your Gemfile.</li>
  <li>Create a session using the JSON file obtained from the Google API.</li>
  <li>Iterate through the list of available folders in your project.</li>
  <li>Filter the folders to create a page that displays the folder name and its containing PDFs.</li>
  <li>Filter the contents of each folder, listing the files using query parameters.</li>
  <li>Transform the filtered children into an array of hash objects, containing the file name and public URL.</li>
  <li>Create another hash array using the folder name as the key and the array of files as the value.</li>
  <li>Inject the data read from the Google API into the Jekyll context to be processed for a custom page.</li>
</ol>

<p>Here’s an example implementation of the generator plugin:</p>

<h4 id="plugin-generatorrb">Plugin (generator.rb)</h4>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">require</span> <span class="s2">"google_drive"</span>

<span class="k">module</span> <span class="nn">Jekyll</span>
  <span class="k">module</span> <span class="nn">GoogleDriveGenerator</span>
    <span class="k">class</span> <span class="nc">Generator</span> <span class="o">&lt;</span> <span class="no">Jekyll</span><span class="o">::</span><span class="no">Generator</span>
      <span class="k">def</span> <span class="nf">generate</span><span class="p">(</span><span class="n">site</span><span class="p">)</span>
        <span class="n">session</span> <span class="o">=</span> <span class="no">GoogleDrive</span><span class="o">::</span><span class="no">Session</span><span class="p">.</span><span class="nf">from_service_account_key</span><span class="p">(</span><span class="s2">"./_plugins/config.json"</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
        
        <span class="n">session</span><span class="p">.</span><span class="nf">files</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">file</span><span class="o">|</span>
          <span class="k">if</span> <span class="n">file</span><span class="p">.</span><span class="nf">resource_type</span> <span class="o">==</span> <span class="s1">'folder'</span>
            <span class="n">childs</span> <span class="o">=</span> <span class="n">session</span><span class="p">.</span><span class="nf">files</span><span class="p">(</span><span class="ss">q: </span><span class="s2">"'</span><span class="si">#{</span><span class="n">file</span><span class="p">.</span><span class="nf">resource_id</span><span class="p">[</span><span class="n">file</span><span class="p">.</span><span class="nf">resource_id</span><span class="p">.</span><span class="nf">rindex</span><span class="p">(</span><span class="s2">":"</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="o">..-</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">' in parents "</span><span class="p">)</span>
            <span class="n">childstrasnformed</span> <span class="o">=</span> <span class="p">[]</span>
            
            <span class="n">childs</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">child</span><span class="o">|</span>
              <span class="n">childstrasnformed</span><span class="p">.</span><span class="nf">push</span><span class="p">({</span>
                <span class="s2">"human_url"</span> <span class="o">=&gt;</span> <span class="n">child</span><span class="p">.</span><span class="nf">human_url</span><span class="p">.</span><span class="nf">sub</span><span class="p">(</span><span class="s2">"view"</span><span class="p">,</span> <span class="s2">"preview"</span><span class="p">),</span>
                <span class="s2">"title"</span> <span class="o">=&gt;</span> <span class="n">child</span><span class="p">.</span><span class="nf">title</span>
              <span class="p">})</span>
            <span class="k">end</span>
            
            <span class="n">data</span><span class="p">[</span><span class="n">file</span><span class="p">.</span><span class="nf">title</span><span class="p">]</span> <span class="o">=</span> <span class="n">childstrasnformed</span>
          <span class="k">end</span>
        <span class="k">end</span>

        <span class="c1"># Inject data into template</span>
        <span class="n">site</span><span class="p">.</span><span class="nf">data</span><span class="p">[</span><span class="s1">'certs'</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<h4 id="template-indexhtml">Template (index.html)</h4>

<div class="language-liquid highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
&lt;div class="feature__wrapper"&gt;
  <span class="p">{%</span><span class="w"> </span><span class="nt">for</span><span class="w"> </span><span class="nv">link_hash</span><span class="w"> </span><span class="nt">in</span><span class="w"> </span><span class="nv">site.data.certs</span><span class="w"> </span><span class="p">%}</span>
    &lt;header class="title-set-course"&gt;<span class="p">{{</span><span class="w"> </span><span class="nv">link_hash</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="p">}}</span>&lt;/header&gt;
    <span class="p">{%</span><span class="w"> </span><span class="nt">for</span><span class="w"> </span><span class="nv">link</span><span class="w"> </span><span class="nt">in</span><span class="w"> </span><span class="nv">link_hash[1]</span><span class="w"> </span><span class="p">%}</span>
      &lt;iframe src="<span class="p">{{</span><span class="w"> </span><span class="nv">link</span><span class="p">.</span><span class="nv">human_url</span><span class="w"> </span><span class="p">}}</span>" width="300"&gt;&lt;/iframe&gt;
      &lt;a href="<span class="p">{{</span><span class="w"> </span><span class="nv">link</span><span class="p">.</span><span class="nv">human_url</span><span class="w"> </span><span class="p">}}</span>"&gt;<span class="p">{{</span><span class="w"> </span><span class="nv">link</span><span class="p">.</span><span class="nv">title</span><span class="w"> </span><span class="p">}}</span>&lt;/a&gt;
      &lt;br&gt;
    <span class="p">{%</span><span class="w"> </span><span class="nt">endfor</span><span class="w"> </span><span class="p">%}</span>
  <span class="p">{%</span><span class="w"> </span><span class="nt">endfor</span><span class="w"> </span><span class="p">%}</span>
&lt;/div&gt;

</code></pre></div></div>
<p>I dedicated two days to researching and working on this task. 
I thoroughly enjoyed this journey and the learning experience it provided. 
I hope the code and information 
I have shared can be a valuable reference for others and be utilized for different purposes.</p>

<h2 id="references">References</h2>

<ul>
  <li><a href="https://www.youtube.com/watch?v=VqoSUSy011I&amp;ab_channel=Twilio">YouTube - Twilio: Google Spreadsheets and Ruby</a></li>
  <li><a href="https://www.twilio.com/blog/google-spreadsheets-ruby-html">Twilio Blog - Google Spreadsheets and Ruby</a></li>
  <li><a href="https://github.com/gimite/google-spreadsheet-ruby">GitHub - gimite/google-spreadsheet-ruby</a></li>
  <li><a href="https://medium.com/software-development-with-ease/understanding-hashmap-datastructure-ruby-aec3868bc5ad">Medium - Understanding HashMap Data Structure in Ruby</a></li>
</ul>

<p class="notice--success"><strong>Note:</strong> If you enjoy my content, please feel free to leave a comment or share 
your thoughts. Your feedback is greatly appreciated and encourages me to continue
 creating valuable content. Thank you for your support!</p>


    
      <div id="disqus_thread"></div>
  <script type="text/javascript">
    var disqus_config = function () {
      // Here is an example,
      // this.page.url = "https://poanchen.github.io/blog/2017/07/27/how-to-add-disqus-to-your-jekyll-site";
      this.page.url = "https://qleoz12.github.io//rubby/jekyll/jekyll-ruby-generator-google-api/";
      this.page.identifier = "/rubby/jekyll/jekyll-ruby-generator-google-api/";
    };

    // You should be able to get the following lines of code from your Disqus admin.
    // https://disqus.com/admin/universalcode
    (function() { // DON'T EDIT BELOW THIS LINE
      var d = document, s = d.createElement('script');
      s.src = '//qleoz12githubio.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>
    Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
  </noscript>
    
  </div>
  
</div>
    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
      
        
      
        
      
        
      
        
      
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2023 Leonardo L Sanchez- Dann Brown. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>


      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>










  </body>
</html>
